<head>
    <meta charset="utf-8">
    <title>picDinner - a complete meal of image and audio!</title>
    <meta name="description" content="Pictures and sound paired up to offer you delicious visual and aural meals—built with Meteor"/>
    <script src="jquery.stopgifs.js"></script>
</head>

<body>
    <div id="wrapper">
        {{> head}}
        <div id="container">
            {{> pairs}}
        </div>

        <div id="add-pair" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="Add a pair" aria-hidden="true">
            {{> addPair}}
        </div>

        {{> viewPair}}
    </div>

    <div id="footer">
        <div class="left" id="history">
            {{> history}}
        </div>
        {{#constant}}
        <div class="right shares">
            by <a href="http://mrcoles.com">Peter Coles</a> /
            <a href="https://twitter.com/lethys">@lethys</a> /
            on <a href="https://github.com/mrcoles/picdinner_meteor">github</a> /
            built with <a href="http://meteor.com">meteor</a> &nbsp;&nbsp;
            {{> sharesPrimary}}
        </div>
        {{/constant}}
    </div>
{{#constant}}<div id="fb-root"></div>{{/constant}}
</body>


<!-- head template -->
<template name="head">
    <div id="head">
        <h1>picDinner!</h1>
        <a id="add" href="#" onclick="return false">+ add</a>
    </div>
</template>

<!-- pairs template -->
<template name="pairs">
    {{#unless pair}}
    <div id="pairs">{{#each pairs}}
        <a href="/{{_id}}" class="pair" data-id="{{_id}}" data-image="{{image}}" data-audio="{{audio}}"><img src="{{image}}"></a>{{/each}}
    </div>
    {{/unless}}
</template>

<!-- history template -->
<template name="history">
    {{#if history}}
    →
    {{#each history}}
    <a href="/{{id}}">{{name}}</a>
    {{/each}} ←
    {{/if}}
</template>

<!-- addPair template -->
<template name="addPair">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Pair up an image and audio!</h3>
    </div>
    <form style="margin:0;padding:0">
        <div class="modal-body">
            <div class="row">
                <p class="span5">
                    Link directly to any picture—maybe something from
                    <a href="http://reddit.com/r/gifs" target="_blank">r/gifs</a> or
                    <a href="http://www.quickmeme.com/" target="_blank">quickmeme</a> or
                    <a href="http://imgur.com/">imgur</a>…
                </p>
            </div>
            {{#if formNoImage}}<div class="text-error">This field is required.</div>{{/if}}
            <input class="span5" type="text" name="image" placeholder="URL for an image">
            <br><br>

            <div class="row">
                <p class="span5">
                    Link to any song on
                    <a href="https://soundcloud.com/" target="_blank">soundcloud</a>
                    or enter nothing and use the default song!
                </p>
            </div>
            <input class="span5" type="text" name="audio" placeholder="URL for a song on soundcloud (optional)">
            <br>
        </div>
        <div class="modal-footer">
            <div class="row"><div class="span5">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button class="btn btn-primary" type="submit">Add</button>
            </div></div>
        </div>
    </form>
</template>

<!-- viewPair template -->
<template name="viewPair">
    <div id="view-pair"{{#unless pair}} class="hide" aria-hidden="true"{{/unless}}>{{#if pair}}
        <img id="view-image" src="{{pair.image}}" data-audio="{{pair.audio}}"{{#if isSoundCloud pair.audio}} class="full"{{/if}}>
        {{#if isSoundCloud pair.audio}}
        <iframe id="widget" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url={{pair.audio}}&amp;auto_play=true"></iframe>
        {{/if}}
        <div id="pair-info" class="shares">
            {{> sharesSecondary}}
            <a class="close" href="/" onclick="return false" title="picDinner home">x</a>
        </div>
    {{/if}}</div>
</template>
